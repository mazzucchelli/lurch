{% extends "njk/_base.njk" %}

{% block main %}
    <div class="grid">
        <div class="m6 dashcard dashcard__reports">
            <div class="dashcard--header">
                <p class="dashcard--title">
                    <i class="fi-graph-bar"></i><strong>Styles report</strong>
                </p>
            </div>
            <div class="dashcard--details">
                <ul class="js-accordion accordion" data-accordion data-multi-expand="true" data-allow-all-closed="true">

                    {% for file in scssReport %}
                        {% if file.info.length != 0 %}
                            <li class="accordion-item file" data-accordion-item>
                                <a href="#" class="accordion-title">
                                    <strong>
                                        <span class="file--tot-issues">{{ file.info.length }}</span>
                                        <span class="file--path">- {{ file.path }}</span>
                                    </strong>
                                </a>
                                <div class="accordion-content" data-tab-content>
                                    <ul>
                                        {% for issue in file.info %}
                                            <li class="issue">
                                                <span class="issue--line{% if issue.severity == 'error' %} color__alert{% endif %}{% if issue.severity == 'warning' %} color__warning{% endif %}">
                                                    {% if issue.severity == "error" %}
                                                        <i class="fi-prohibited"></i>
                                                    {% endif %}
                                                    {% if issue.severity == "warning" %}
                                                        <i class="fi-alert"></i>
                                                    {% endif %}
                                                    <strong> at line {{ issue.line }}: </strong>
                                                </span>
                                                <span class="issue--desc">{{ issue.reason }}</span>
                                            </li>
                                            {% if loop.index != loop.length %}<hr>{% endif %}
                                        {% endfor %}
                                    </ul>
                                </div>
                            </li>
                        {% endif %}
                    {% endfor %}

                </ul>
            </div>
        </div>
        <div class="m6 dashcard dashcard__reports">
            <div class="dashcard--header">
                <p class="dashcard--title">
                    <i class="fi-graph-bar"></i><strong>JS report</strong>
                </p>
            </div>
            <div class="dashcard--details">
                <ul class="js-accordion accordion" data-accordion data-multi-expand="true" data-allow-all-closed="true">

                    {% for file in jsReport %}
                        {% if file.info.length != 0 %}
                            <li class="accordion-item file" data-accordion-item>
                                <a href="#" class="accordion-title">
                                    <strong>
                                        <span class="file--tot-issues">{{ file.info.length }}</span>
                                        <span class="file--path">- {{ file.path | string}}</span>
                                    </strong>
                                </a>
                                <div class="accordion-content" data-tab-content>
                                    <ul>
                                        {% for issue in file.info %}
                                            <li class="issue">
                                                <span class="issue--line{% if issue.severity == 2 %} color__alert{% endif %}{% if issue.severity == 1 %} color__warning{% endif %}">
                                                    {% if issue.severity == 2 %}
                                                        <i class="fi-prohibited"></i>
                                                    {% endif %}
                                                    {% if issue.severity == 1 %}
                                                        <i class="fi-alert"></i>
                                                    {% endif %}
                                                    <strong> at line {{ issue.line }}: </strong>
                                                </span>
                                                <span class="issue--desc">{{ issue.reason }}</span>
                                            </li>
                                            {% if loop.index != loop.length %}<hr>{% endif %}
                                        {% endfor %}
                                    </ul>
                                </div>
                            </li>
                        {% endif %}
                    {% endfor %}

                </ul>
            </div>
        </div>
    </div>
{% endblock %}
